<!doctype html>
<html>
<head>
    <title>Strava</title>
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
	<link rel="stylesheet" href="../js/leaflet.css" />
	<script src="../js/leaflet.js"></script>
  	<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
</head>
<body>
	<div id="map"></div>
   	<script>
		var map = L.map('map').setView([42.346237, -71.097765], 13);

		L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'examples.map-i875mjb7'
			}).addTo(map);


  		var jsonlist = [
			"20140220-141528-Ride.json",
			"20140220-210904-Ride.json",
			"20140221-004842-Ride.json",
			"20140221-131812-Ride.json",
			"20140221-233400-Ride.json",
			"20140222-130910-Ride.json",
			"20140222-171334-Ride.json",
			"20140222-205944-Ride.json",
			"20140223-130529-Ride.json",
			"20140223-183625-Ride.json",
			"20140223-212634-Ride.json",
			"20140224-132614-Ride.json",
			"20140224-194240-Ride.json",
			"20140224-203554-Ride.json",
			"20140224-234710-Ride.json",
			"20140225-141758-Ride.json",
			"20140226-002934-Ride.json",
			"20140227-141534-Ride.json",
			"20140227-192342-Ride.json",
			"20140228-005028-Ride.json",
			"20140228-155602-Ride.json",
			"20140228-215840-Ride.json",
			"20140307-165922-Ride.json",
			"20140308-000758-Ride.json",
			"20140308-150336-Ride.json",
			"20140308-233456-Ride.json",
			"20140309-040720-Ride.json",
			"20140309-162808-Ride.json",
			"20140309-202928-Ride.json",
			"20140311-122842-Ride.json",
			"20140311-224048-Ride.json",
			"20140312-121058-Ride.json",
			"20140312-191254-Ride.json",
			"20140314-210608-Ride.json",
			"20140315-041912-Ride.json",
			"20140315-171842-Ride.json",
			"20140316-165922-Ride.json",
			"20140316-200058-Ride.json",
			"20140316-203332-Ride.json",
			"20140320-124640-Ride.json",
			"20140320-222034-Ride.json",
			"20140321-001636-Ride.json",
			"20140321-142738-Ride.json",
			"20140322-141102-Ride.json",
			"20140323-221514-Ride.json",
			"20140325-022944-Ride.json",
			"20140326-144720-Ride.json",
			"20140326-174730-Ride.json",
			"20140327-193336-Ride.json",
			"20140327-234054-Ride.json",
			"20140328-140920-Ride.json",
			"20140329-000030-Ride.json",
			"20140329-171249-Ride.json",
			"20140330-223744-Ride.json",
			"20140331-133841-Ride.json",
			"20140331-173012-Ride.json",
			"20140401-130008-Ride.json",
			"20140402-133903-Ride.json",
			"20140402-232056-Ride.json",
			"20140403-200017-Ride.json",
			"20140403-234418-Ride.json",
			"20140404-154319-Ride.json",
			"20140404-182121-Ride.json",
			"20140406-020043-Ride.json",
			"20140406-050658-Ride.json",
			"20140407-183021-Ride.json",
			"20140407-225713-Ride.json",
			"20140408-183224-Ride.json",
			"20140408-215649-Ride.json",
			"20140409-142446-Ride.json",
			"20140409-231236-Ride.json",
			"20140410-121717-Ride.json",
			"20140410-193507-Ride.json",
			"20140410-233938-Ride.json",
			"20140411-145808-Ride.json",
			"20140411-225342-Ride.json",
			"20140412-004344-Ride.json",
			"20140417-131030-Ride.json",
			"20140417-200401-Ride.json",
			"20140418-014428-Ride.json",
			"20140418-124623-Ride.json",
			"20140418-165359-Ride.json",
			"20140418-200519-Ride.json",
			"20140418-211857-Ride.json",
			"20140419-223208-Ride.json",
			"20140420-124558-Ride.json",
			"20140421-161438-Ride.json",
			"20140421-234930-Ride.json",
			"20140422-012755-Ride.json",
			"20140422-133611-Ride.json",
			"20140422-154437-Ride.json",
			"20140422-213841-Ride.json",
			"20140423-122743-Ride.json",
			"20140423-231107-Ride.json",
			"20140424-120957-Ride.json",
			"20140424-192024-Ride.json",
			"20140424-235711-Ride.json",
			"20140425-152135-Ride.json",
			"20140425-222610-Ride.json",
			"20140426-002341-Ride.json",
			"20140426-014656-Ride.json",
			"20140426-142358-Ride.json",
			"20140428-142012-Ride.json",
			"20140428-232142-Ride.json",
			"20140429-011749-Ride.json",
			"20140429-203647-Ride.json",
			"20140429-214704-Ride.json",
			"20140430-001843-Ride.json",
			"20140430-155755-Ride.json",
			"20140501-000013-Ride.json",
			"20140501-123317-Ride.json",
			"20140502-035106-Ride.json",
			"20140502-151602-Ride.json",
			"20140502-224328-Ride.json",
			"20140503-030345-Ride.json",
			"20140503-143347-Ride.json",
			"20140503-231301-Ride.json",
			"20140504-132507-Ride.json",
			"20140504-202323-Ride.json",
			"20140504-205202-Ride.json",
			"20140505-132116-Ride.json",
			"20140506-001452-Ride.json",
			"20140507-023400-Ride.json",
			"20140507-130316-Ride.json",
			"20140507-212349-Ride.json",
			"20140507-215224-Ride.json",
			"20140507-234410-Ride.json",
			"20140508-122517-Ride.json",
			"20140508-220544-Ride.json",
			"20140509-025949-Ride.json",
			"20140509-043139-Ride.json",
			"20140509-150836-Ride.json",
			"20140509-220439-Ride.json",
			"20140509-234121-Ride.json",
			"20140510-023904-Ride.json",
			"20140510-154927-Ride.json",
			"20140510-201401-Ride.json",
			"20140510-225319-Ride.json",
			"20140511-145204-Ride.json",
			"20140512-144858-Ride.json",
			"20140513-000255-Ride.json",
			"20140513-130350-Ride.json",
			"20140513-224728-Ride.json",
			"20140514-124711-Ride.json",
			"20140514-233450-Ride.json",
			"20140515-132337-Ride.json",
			"20140516-165931-Ride.json",
			"20140517-013012-Ride.json",
			"20140517-041702-Ride.json",
			"20140517-151506-Ride.json",
			"20140518-142830-Ride.json",
			"20140519-134916-Ride.json",
			"20140520-043302-Ride.json",
			"20140520-121645-Ride.json",
			"20140520-225814-Ride.json",
			"20140521-140742-Ride.json",
			"20140522-011645-Ride.json",
			"20140522-051201-Ride.json",
			"20140522-135032-Ride.json",
			"20140522-163548-Ride.json",
			"20140523-050845-Ride.json",
			"20140523-194645-Ride.json",
			"20140523-205700-Ride.json",
			"20140524-045350-Ride.json",
			"20140525-154853-Ride.json",
			"20140601-125756-Ride.json",
			"20140601-144747-Ride.json",
			"20140601-180707-Ride.json",
			"20140602-125921-Ride.json",
			"20140602-182724-Ride.json",
			"20140604-170811-Ride.json",
			"20140604-194144-Ride.json",
			"20140604-213118-Ride.json",
			"20140605-154405-Ride.json",
			"20140605-214622-Ride.json",
			"20140606-013626-Ride.json",
			"20140606-112250-Ride.json",
			"20140606-215027-Ride.json",
			"20140607-000353-Ride.json",
			"20140607-021426-Ride.json",
			"20140607-154951-Ride.json",
			"20140607-234143-Ride.json",
			"20140608-155928-Ride.json",
			"20140610-015104-Ride.json",
			"20140612-220023-Ride.json",
			"20140613-011108-Ride.json",
			"20140613-155303-Ride.json",
			"20140613-175852-Ride.json",
			"20140614-212515-Ride.json",
			"20140615-134925-Ride.json",
			"20140618-144510-Ride.json",
			"20140621-020232-Ride.json",
			"20140621-041503-Ride.json",
			"20140621-172205-Ride.json",
			"20140623-151759-Ride.json",
			"20140623-215021-Ride.json",
			"20140623-232118-Ride.json",
			"20140715-192202-Ride.json",
			"20140717-214534-Ride.json",
			"20140718-002924-Ride.json",
			"20140718-140827-Ride.json",
			"20140720-164235-Ride.json",
			"20140720-194831-Ride.json",
			"20140720-213007-Ride.json",
			"20140720-222733-Ride.json",
			"20140721-174519-Ride.json",
			"20140721-214141-Ride.json",
			"20140721-225254-Ride.json",
			"20140723-214737-Ride.json",
			"20140724-214911-Ride.json",
			"20140725-012001-Ride.json",
			"20140726-172959-Ride.json",
			"20140726-190346-Ride.json",
			"20140726-211451-Ride.json",
			"20140726-221227-Ride.json",
			"20140726-225402-Ride.json",
			"20140728-115229-Ride.json",
			"20140728-172552-Ride.json",
			"20140728-220138-Ride.json",
			"20140729-020854-Ride.json",
			"20140810-220040-Ride.json",
			"20140811-004541-Ride.json",
			"20140811-142355-Ride.json",
			"20140812-163238-Ride.json",
			"20140812-203734-Ride.json",
			"20140814-214452-Ride.json",
			"20140814-235652-Ride.json",
			"20140816-131608-Ride.json"
		];

  		$.each(jsonlist, function (i, jsonid) {
	  		$.getJSON("./datafiles/"+jsonid, function(data) {
			    var geojson = L.geoJson(data, {
			     	onEachFeature: function (feature, layer) {
			       		layer.bindPopup(feature.properties.name);
			    	}
			    }).addTo(map);
	  		});
	  	});





		<!-- old code to delete at the end-->
		 // $.getJSON("./datafiles/20140810-220040-Ride.json", function(data) {
		 //    var geojson = L.geoJson(data, {
		 //     	onEachFeature: function (feature, layer) {
		 //       		layer.bindPopup(feature.properties.name);
		 //    	}
		 //    });
		 //    var map = L.map('map').fitBounds(geojson.getBounds());
		 //    tiles.addTo(map);
		 //    geojson.addTo(map);
  	// 	});	
  	// 	
		<!-- this code only shows the first json...-->
		// $.when(
		// 	$.getJSON("./datafiles/20140721-225254-Ride.json"),
		// 	$.getJSON("./datafiles/20140810-220040-Ride.json")
		// ).done(function(data) {
		// 	    L.geoJson(data, {
		// 	     	onEachFeature: function (feature, layer) {
		// 	       		layer.bindPopup(feature.properties.name);
		// 	    	}
		// 	    }).addTo(map);
	 //  		});	


		<!-- this code gets both to display, but is looong-->
		// $.getJSON("./datafiles/20140810-220040-Ride.json", function(data) {
		//     var geojson1 = L.geoJson(data, {
		//      	onEachFeature: function (feature, layer) {
		//        		layer.bindPopup(feature.properties.name);
		//     	}
		//     }).addTo(map);
  // 		});	
		// $.getJSON("./datafiles/20140721-225254-Ride.json, function(data) {
		//     var geojson2 = L.geoJson(data, {
		//      	onEachFeature: function (feature, layer) {
		//        		layer.bindPopup(feature.properties.name);
		//     	}
		//     }).addTo(map);
  // 		});	

   	</script>

</body>
</html>